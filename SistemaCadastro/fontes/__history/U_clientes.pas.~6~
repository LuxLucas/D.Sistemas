unit U_clientes;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Mask, Vcl.DBCtrls,
  Vcl.ComCtrls, Vcl.Imaging.GIFImg, Vcl.ExtCtrls, Vcl.Imaging.pngimage, Data.DB;

type
  TClientes = class(TForm)
    PageControl1: TPageControl;
    tb_cadastro: TTabSheet;
    tb_consulta: TTabSheet;
    id: TDBEdit;
    lb_id: TLabel;
    txt_endereço: TDBEdit;
    lb_endereco: TLabel;
    lb_nome: TLabel;
    txt_nome: TDBEdit;
    lb_bairro: TLabel;
    bairro: TDBEdit;
    cidade: TDBEdit;
    lb_cidade: TLabel;
    lb_uf: TLabel;
    uf: TDBComboBox;
    cep: TDBEdit;
    lb_cep: TLabel;
    email: TDBEdit;
    lb_email: TLabel;
    lb_cpf: TLabel;
    cpf: TDBEdit;
    lb_celular: TLabel;
    celular: TDBEdit;
    lb_nasc: TLabel;
    data_nasc: TDBEdit;
    situacao: TDBComboBox;
    lb_situacao: TLabel;
    Image1: TImage;
    data_cad: TDBEdit;
    lb_cad: TLabel;
    Image2: TImage;
    btn_inserir: TImage;
    btn_editar: TImage;
    btn_salvar: TImage;
    btn_excluir: TImage;
    btn_cancelar: TImage;
    btn_fechar: TImage;
    btn_localizar: TImage;
    procedure FormActivate(Sender: TObject);
    procedure btn_inserirClick(Sender: TObject);
    procedure btn_editarClick(Sender: TObject);
    procedure btn_salvarClick(Sender: TObject);
  private
    { Private declarations }
    PROCEDURE configBotoes;

  public
    { Public declarations }
  end;

var
  Clientes: TClientes;

implementation

{$R *.dfm}

uses U_dm;

procedure TClientes.btn_inserirClick(Sender: TObject);
begin

  DM.tb_clientes.Active:=true;
  dm.tb_clientes.Insert;

  //Habilitando e desbilitando botões
  configBotoes;
  //Tratamento da Data
  dm.tb_clientesdata_cad.Value:= date;
  txt_nome.setfocus;

end;

procedure TClientes.configBotoes;
begin

 btn_inserir.visible:= dm.tb_clientes.State in [dsbrowse];
 btn_editar.visible:= dm.tb_clientes.State in [dsbrowse];
 btn_salvar.visible:= dm.tb_clientes.State in [dsinsert, dsedit];
 btn_excluir.visible:= dm.tb_clientes.State in [dsbrowse];
 btn_cancelar.visible:= dm.tb_clientes.State in [dsbrowse];

 // enabled no lugar de visible para botões


 btn_excluir.visible:= dm.tb_clientes.State in [dsbrowse];

 btn_cancelar.visible:= dm.tb_clientes.State in [dsbrowse];

end;

procedure TClientes.FormActivate(Sender: TObject);
begin
  (image1.Picture.Graphic as TGIFImage).Animate:=true;
end;

procedure TClientes.btn_salvarClick(Sender: TObject);
begin
 dm.tb_clientes.edit;
 showmessage('Cliente alvo com sucesso ');
 //habilitando e desabilitando botões
 configBotoes;

end;

procedure TClientes.btn_editarClick(Sender: TObject);
begin
 dm.tb_clientes.edit;
 configBotoes;

end;

end.
